"use strict";var express=require("express"),app=express(),morgan=require("morgan");app.use(express.json()),morgan.token("type",function(n,e){return JSON.stringify(e.body)}),app.use(morgan("type"));var persons=[{name:"George",id:1},{name:"Smith",id:2},{name:"Mike",id:3},{name:"Bill",id:4}];app.get("/",function(n,e){e.send("Hello world")}),app.get("/api/persons",function(n,e){e.json(persons)}),app.get("/api/persons/:id",function(n,e){var o=Number(n.params.id),s=persons.find(function(n){return n.id===o});if(!s)return e.status(404).end();e.json(s)}),app.get("/info",function(n,e){var o=persons.length;e.send("Phonebook has info for ".concat(o," people.\n ").concat((new Date).toString()))}),app.post("/api/persons",function(n,e){var o=Math.floor(100*Math.random()),s=n.body,r=persons.find(function(n){return n.name===s.name}),t={name:s.name,id:o};return s.name?r?e.status(304).json({error:"Name already exists"}):(persons=persons.concat(t),void e.json(t)):e.status(304).json({error:"Name has to be included."})}),app.delete("/api/persons/:id",function(n,e){var o=Number(n.params.id),s=persons.find(function(n){return n.id===o});s||e.status(404).end(),persons=persons.filter(function(n){return n!==s}),e.status(204).end()});var unknownEndpoint=function(n,e){e.status(404).send({error:"unknown endpoint"})};app.use(unknownEndpoint);var PORT=3001;app.listen(PORT,function(){console.log("App is listening on port ".concat(PORT))});